---
title: ä½¿ç”¨ Jamstack æŠ€è¡“å»ºç½®éƒ¨è½æ ¼
date: '2022-07-23'
lastmod: '2022-08-06'
tags: ['build-a-blog', 'solution-stack', 'jamstack', 'tailwind-css', 'react', 'next-js', 'intro', 'tech-skills-basic']
draft: false
summary: 'ä»‹ç´¹ Jamstack æŠ€è¡“ï¼Œåˆ†äº«å»ºç«‹ä¸€å€‹éƒ¨è½æ ¼ï¼ŒæŠ€è¡“é¢æœƒæœ‰å“ªäº›æ±ºç­–ä»¥åŠåŸ·è¡Œæ­¥é©Ÿ'
images: []
---

# TOC

| å…§æ–‡å¤§ç¶±                                            | TL;DR                                                                                  |
|-----------------------------------------------------|----------------------------------------------------------------------------------------|
| [é©åˆé–±è®€å°è±¡](#é©åˆé–±è®€å°è±¡)                       | å…·å‚™åŸºç¤ç¨‹å¼èƒ½åŠ›                                                       |
| [ç¶²é å»ºç½®æŠ€è¡“](#ç¶²é å»ºç½®æŠ€è¡“)                       | [Jamstack](https://jamstack.org)                                                       |
| [Jamstack Site Generator](#Jamstack-Site-Generator) | Next.js                                                                                |
| [Next.js Starter](#nextjs-starter)                  | [Tailwind Nextjs Starter Blog](https://github.com/timlrx/tailwind-nextjs-starter-blog) |
| [Hosting Service](#Hosting-Service)                 | Vercel                                                                                 |
| [åŸŸåä¾›æ‡‰å•†](#åŸŸåä¾›æ‡‰å•†)                           | NameCheap                                                                              |

# é©åˆé–±è®€å°è±¡


- å…·å‚™åŸºç¤ç¨‹å¼èƒ½åŠ›
- å°ç¶²é æŠ€è¡“æœ‰èˆˆè¶£çš„äºº
- æƒ³ä½¿ç”¨é CMS æŠ€è¡“æ¶ç«™çš„äºº
- æ²’å­¸é react æƒ³åšä¸­å­¸çš„äºº  

#

# ç¶²é å»ºç½®æŠ€è¡“

JAMstackï¼Œä¸€ç¨® (pre-built) éœæ…‹ç¶²é å»ºç½®æŠ€è¡“ï¼Œç”±ä»¥ä¸‹ä¸‰å…ƒç´ æ‰€æ§‹æˆ

- __J__: Javascriptï¼Œå„ç¨®å‰ç«¯æ¡†æ¶ (Vueã€Reactã€Angular...)
- __A__: API (å„ç¨®ç¬¬ä¸‰æ–¹æœå‹™)
- __M__: Markup (ç”± __static generator__ ç”¢ç”Ÿçš„éœæ…‹é é¢)

## å°æ¯”å…¶ä»–å¸¸è¦‹ç¶²ç«™ solution stack

<ImageWithCap
   alt="å°æ¯”å…¶ä»–å¸¸è¦‹ç¶²ç«™ solution stack"
   src="/static/images/2022/solution-stack-comparison.png"
   cap="Image by [Tapas Adhikary](https://hashnode.com/@atapas) on [GreenRoots Blog](https://blog.greenroots.info/jamstack-for-all-an-introduction)"
   />

ä¸Šåœ–å°æ¯”å¹¾å€‹å¸¸è¦‹çš„ solution stackï¼Œç”±æ­¤å¯çŸ¥ Jamstack ä¸»è¦å°‘äº† web server å’Œ database

é€é __static generator__ ç”¢ç”Ÿçš„éœæ…‹é é¢å³å¯ç›´æ¥éƒ¨ç½²

æ­¤å¤–é‚„å¯ä»¥ç”¨ GitHub Pagesã€Netlifyã€Vercel ç­‰æœå‹™å…è²»éƒ¨ç½²ï¼Œçœçš„è€ƒæ…®ç§Ÿè³ƒæ©Ÿå™¨æˆ–ç«™å°ç­‰éº»ç…©äº‹ï¼

## å°æ¯”å‚³çµ±ç¶²ç«™å»ºç½®æ¶æ§‹

<ImageWithCap
   alt="å°æ¯”å‚³çµ±ç¶²ç«™å»ºç½®æ¶æ§‹"
   src="/static/images/2022/traditional-web-vs-jamstack.png"
   cap="Image by [Ryan Chou](https://blog.typeart.cc/jamstack-intro/)"
   />

ä¸Šåœ–å°æ¯”å‚³çµ±ç¶²ç«™æ¶æ§‹ï¼Œç”±æ­¤å¯çŸ¥ JAMstack èƒ½ç›´æ¥éƒ¨ç½²åœ¨ CDN ä¸Šï¼Œå­˜å–é€Ÿåº¦æœƒå¿«ä¸Šè¨±å¤šï¼

å…¶ä¸­å‚³çµ±æ¶æ§‹ Web Serverã€App Server ä¸ä¸€å®šå…©å€‹éƒ½æœƒæœ‰ï¼Œä»¥å‚³çµ± Asp.net MVC ç‚ºä¾‹

æ²’æœ‰å¥—ç”¨å‰ç«¯æ¡†æ¶çš„æƒ…æ³ä¸‹ï¼ŒClient --> IIS (WebServer) --> Databaseï¼Œåªæœƒæœ‰ä¸€å€‹ server

## JAMstack å¹¾å€‹å¸¸è¦‹çš„å…ƒä»¶

<ImageWithCap
   alt="JAMstack å¹¾å€‹å¸¸è¦‹çš„å…ƒä»¶"
   src="/static/images/2022/what-is-jamstack.jpg"
   cap="Image from [Un poco de Java](https://unpocodejava.com/2021/10/04/que-es-jamstack)"
   />

ä¸Šåœ–åˆ—å‡ºå¹¾å€‹å¸¸è¦‹çš„é¸é …ï¼Œè‹¥ç¶²ç«™åªéœ€è¦å‰ç«¯æ¡†æ¶æ¸²æŸ“é é¢çš„è©±ï¼ŒJAM ä¸­çš„ APIs ä¸¦ä¸æ˜¯å¿…è¦å…ƒç´ 

æ›å¥è©±èªªï¼ŒJ èˆ‡ M å¾å¸¸è¦‹é¸é …æ“‡ä¸€ä½¿ç”¨ï¼ŒAPIs å¯å¤šé¸äº¦å¯éƒ½ä¸ä½¿ç”¨

## ç¢å¿µ

æˆ‘æœ‰è“„æ„ä¸ä»‹ç´¹å‚³çµ± CMS (Wordpress) æ¶ç«™æ–¹æ³•

é¸æ“‡ Jamstack åŸå› å¯ä»¥åƒè€ƒ[å‰æ®µçš„è¨è«–](#å°æ¯”å‚³çµ±ç¶²ç«™å»ºç½®æ¶æ§‹) (~~å› çˆ²æ½®~~)

æ­¤å¤–ï¼ŒJamstack ä¸²æ¥ Headless CMS æœå‹™ä¹Ÿä¸åœ¨æœ¬æ–‡è¨è«–ç¯„åœå…§ (è¿½æ±‚æœ€ç°¡å¯è¡Œç”¢å“æ˜¯ä¹Ÿ~)

# Jamstack Site Generator

Site generator å°‡ markup è½‰æ›æˆéœæ…‹é é¢ï¼Œé€šå¸¸ generator æœƒæ­é…ä¸€ç¨®ç‰¹å®šç¨‹å¼èªè¨€å’Œå‰ç«¯æ¡†æ¶ï¼ˆæ¨£æ¿èªè¨€ï¼‰

ä»¥ Next.js ç‚ºä¾‹ï¼Œç¨‹å¼èªè¨€ç‚º Javascriptï¼Œå‰ç«¯æ¡†æ¶å‰‡ä½¿ç”¨ React

æ›´å¤š generator å¯åƒè€ƒ [Jamstack.org Site Generators](https://jamstack.org/generators)

æœ¬ç«™ä½¿ç”¨ Next.js æ¶è¨­ï¼Œé¸æ“‡ç†ç”±å–®ç´”ç‚ºäº† userbase (æ²’éŒ¯ï¼Œå°±æ˜¯è¹­ç†±åº¦)

ä»¥ä¸‹ç°¡æ˜“ä»‹ç´¹å¹¾å€‹å¸¸è¦‹ generator
- Hugo: æœ‰å¾ˆå¤šä½ˆæ™¯ä¸»é¡Œ
   - Language: GO
   - Template: GO
- Gatsby: è³‡æ–™å±¤é è¨­ä½¿ç”¨ GraphQLï¼Œæœ‰ plugin ç”Ÿæ…‹ç³»
   - Language: Javascript
   - Template: React
- Jekyll: Github Pages é è¨­ä½¿ç”¨çš„ generator
   - Language: Ruby
   - Template: Liquid

# Next.js Starter

Starter ä¸­æ–‡å¯ä»¥ç¿»æˆæ–°æ‰‹åŒ… (å‚»ç“œåŒ…)ï¼Œç›®çš„æ˜¯ä¸€éµå®‰è£é¦¬ä¸Šå¾—åˆ°ä¸€å€‹å¯ç”¨åˆä¸é›£çœ‹çš„ç”¢å“

é€šå¸¸èµ°å®˜ç¶²æ–°æ‰‹æ•™å­¸å®‰è£æ­¥é©Ÿæœƒå¤šä¸€äº›ï¼Œé è¨­çš„ç¶²é ç•«é¢ä¹Ÿæœƒå¾ˆé™½æ˜¥ï¼Œé€™æ™‚å€™å°±æœƒéœ€è¦ Starter

Starter å’Œ Theme ç›¸æ¯” Starter åˆå²å®³ä¸€é»

Theme é€šå¸¸åªæœ‰è¦–è¦ºä¸Šå¹«ä½ å¥—å¥½ï¼ŒåŠŸèƒ½é¢è¦è‡ªå·±ä¾†ï¼ŒStarter å‰‡æ˜¯å…¨åŒ…  
(ç¢å¿µ: bootstrap/ template ä¹Ÿæ˜¯å·®ä¸å¤šçš„æ¦‚å¿µï¼Œå¤§å®¶çŸ¥é“å°±å¥½...)

ç¶“éä¸€ç•ªæœå°‹ (keyword: next.js blog starter)ï¼Œæ²’ç™¼ç¾å¹¾å€‹æ–°æ‰‹åŒ…  
(ç¢å¿µ: å¤§æ¦‚æ˜¯ Next.js è¼¸ Hugo/ Gatsby ä¸»è¦ç†ç”±)

æœ€çµ‚æ‰¾äº†å…©å€‹ï¼Œé¡¯ç„¶çš„æ±ºå®šä½¿ç”¨ TailwindCss Starter Blog
- [Vercel Next.js Demo Site (è¦ºå¾—é™½æ˜¥)](https://next-blog-starter.vercel.app)
- [Next.js TailwindCss Starter Blog (çœ‹èµ·ä¾†å²å®³å¤šäº†)](https://github.com/timlrx/tailwind-nextjs-starter-blog)

## TailwindCss

>A utility-first CSS framework packed with classes like `flex`, `pt-4`, `text-center` and `rotate-90` that can be composed to build any design, directly in your markup.  
>--- TailwindCss å®˜ç¶²

ç°¡å–®èªª TailwindCss æ˜¯ç‚ºäº†è§£æ±º class name å‘½åå›°å¢ƒè€Œç”¢ç”Ÿçš„å·¥å…·
- `flex` --> `display` as `flex`
- `pt-4` --> `padding-top` by 4 units

æ¯å€‹ class åªåšä¸€ä»¶äº‹ (utility)ï¼Œå†ç”±å¤šå€‹ utility å»å»ºæ§‹ä»»ä½•è¨­è¨ˆ

é€™æ¨£é€éé–±è®€ class name å°±å¯çŸ¥é“ç›®å‰å¥—ç”¨äº†å“ªäº› styleï¼Œä»¥æ­¤é€ƒè„«å‘½åå›°å¢ƒ

æ­¤å¤–ï¼ŒTailwindCss ä¹Ÿä¿ç•™äº†å‚³çµ±å‘½åæ–¹å¼ï¼Œä¾èˆŠå¯ä»¥ç”¨ä¸€çµ„åˆ¥åå»æ›¿æ›éé•·çš„ class name

TailwindCss å…¶ä»–ç‰¹é»
- VSCode å¯å®‰è£ TailwindCss intellisense æ’ä»¶ï¼Œä¸éœ€è¦è¨˜æ†¶å„ç¨®åç¨±
- éƒ¨ç½²æ™‚æœƒè‡ªå‹•ç§»é™¤æ²’ä½¿ç”¨åˆ°çš„ classesï¼Œæ¸›å°‘ css file æª”æ¡ˆå¤§å°
- Framework è‰²ç³»ï¼Œå­—é«”ï¼Œå­—ç´šéƒ½å¯ä»¥é€é config file å®¢è£½

## Starter Blog å»ºç½®æŠ€è¡“æ­¥é©Ÿ

ä¾ç…§å®˜ç¶² [readme](https://github.com/timlrx/tailwind-nextjs-starter-blog#quick-start-guide) æœ‰ä¸‹åˆ—æ­¥é©Ÿ

å…¶ä¸­ `pliny` é€™æ¢è·¯ç•¶æ™‚ç‰ˆæœ¬è·‘ä¸èµ·ä¾†ï¼Œä»¥ä¸‹åˆ—è¡¨å°‡ä½¿ç”¨èˆŠæ–¹æ³•å®‰è£  
(pliny version: `@pliny/cli/0.0.2 darwin-x64 node-v17.5.0`)
1. `npx degit 'timlrx/tailwind-nextjs-starter-blog#contentlayer'`
   - åå¥½ typescript æ‰€ä»¥æŒ‡å‘ branch 'contentlayer'
   - `contentlayer` version: 8c5c5734319424b8de2fa6df2583cc46ccca8560
   - `contentlayer` è·Ÿ `pliny` å®‰è£å¾Œçš„ç‰ˆæœ¬ç•¥æœ‰å·®ç•°
   - `degit` é è¨­ä¸æœƒå»ºç«‹ `.git` folder (é©ç”¨æ–¼æœ‰ 'template' æ¨™ç±¤çš„ repo)
2. Personalize `siteMetadata.js` (site related information)
   - å¯ä»¥å…ˆæ”¹å¹¾å€‹åŸºæœ¬çš„ï¼Œä¹‹å¾Œå†å›ä¾†è£œè¨­å®š
   - æ‰€æœ‰æ”¹å‹•éƒ½æ˜¯ hot reload
3. Modify the content security policy in `next.config.js` if you want to use any analytics provider or a commenting solution other than giscus.
   - æ²’ç‰¹åˆ¥æ”¹å‹•
4. Personalize `authors/default.md` (main author)
   - é—œæ–¼æˆ‘ï¼Œå¯ä»¥ä¹‹å¾Œå†è£œ
5. Modify `projectsData.js` (ç•¥)
6. Modify `headerNavLinks.js` to customize navigation links
   - å…ˆç§»é™¤ projectï¼Œä¹‹å¾Œæœ‰äº†å†è£œ
7. Add blog posts (ç•¥)
8. Deploy on Vercel (ç•¥)

## è¨­è¨ˆå¾®èª¿

æœ¬ä¾†æƒ³åšæˆ [Hugo Theme Hermit](https://github.com/Track3/hermit) æ¥µç°¡é¢¨

ä½†ç”¨ react é‡åˆ»ä¸€éå¯¦åœ¨å¤ªè²»æ™‚äº†ï¼Œæ”¹æˆåƒè€ƒæ‹¼æ¹Š [readme ç¯„ä¾‹](https://github.com/timlrx/tailwind-nextjs-starter-blog#examples)

ä»¥ä¸‹åˆ—å‡ºå¹¾å€‹æœ‰æ”¹å‹•çš„åœ°æ–¹
1. èª¿æ•´è‰²ç³»
   - åœ¨ `tailwind.config.js` æ‰¾åˆ° `theme`.`extend`.`colors` èª¿æ•´ `primary`ï¼Œ`gray` é€™å…©å€‹å€¼
2. èª¿æ•´ `Footer.tsx`ï¼Œæ”¹æˆ one-liner
3. èª¿æ•´ `LayoutWrapper.tsx` header (NavBar)
   - å›ºå®š NavBar åœ¨æœ€ä¸Šæ–¹ï¼ŒåŠ å…¥åŠé€æ˜æ•ˆæœ
4. èª¿æ•´ `MobileNav.tsx` (å› æ‡‰ç¬¬ä¸‰æ¢æ”¹å‹•ï¼Œéœ€è¦å¾®èª¿)
5. èª¿æ•´ `ListLayout.tsx`
   - å¢åŠ  `framer-motion`

# Hosting Service

ç•¶åˆæ˜¯ Vercel/ GitHub Pages äºŒé¸ä¸€ï¼Œæœ¬ä¾†æƒ³æ”¾åœ¨ GitHub ä¸Šï¼Œå¥½è™•å¯ä»¥å°‘è¾¦ä¸€å€‹å¸³è™Ÿ

å¾Œä¾†ç™¼ç¾ GitHub Pages é è¨­èµ° Jekyllï¼Œå¦‚è¦ä½¿ç”¨ Next.js æœƒéœ€è¦é¡å¤–è¨­å®š

åšä¸€çµ„æ”¶ä¸‹å·´é‹å‹•å¾Œï¼Œæœæ–·ä½¿ç”¨ Vercel (next.js è¦ªçˆ¹æœ‰åŠ åˆ†)

## æŠ€è¡“æ­¥é©Ÿ

ç…§è‘—[å®˜ç¶²æ–‡ä»¶](https://nextjs.org/learn/basics/deploying-nextjs-app)æ­¥é©Ÿåš

èµ°åˆ°ç¬¬å››æ­¥å»ºç½®çš„æ™‚å€™æœƒç™¼ç”ŸéŒ¯èª¤ï¼ŒåŸå› æ˜¯ Vercel æœƒéµå¾ª `.eslintrc.js` è£¡çš„ rules

- æ‰¾åˆ°é€™è¡Œ `'prettier': 'error'`
- æŠŠ `prettier` å‘Šè­¦å±¤ç´š (warning level)
- å¾ `'error'` æ”¹æˆ `'warning'` å°±èƒ½é€šéå»ºç½®

å¹³å¸¸ç”¨ `localhost` é–‹ç™¼ä¸æœƒè§¸å‹•åˆ° `prettier` warning rules

ä»”ç´°ä¸€çœ‹ `prettier` æ„è¦‹ç›¸ç•¶å¤šï¼Œé€£ class name å®£å‘Šé †åºéƒ½æœƒæŠ±æ€¨

æœ‰æ†å¿ƒçš„äººå¯ä»¥æŒ‘æˆ°ä¸€å€‹ã„§å€‹æ”¹ï¼Œæˆ‘æœæ–·æ”¾æ£„ç›´æ¥é™ä½å‘Šè­¦å±¤ç´š

# åŸŸåä¾›æ‡‰å•†

æ‰“ç®— NameCheapã€GoDaddy äºŒé¸ä¸€ï¼Œçˆ¬äº†ä¸€ä¸‹æ–‡ç« 

å¤§éƒ¨ä»½æ–‡ç« éƒ½èªª NameCheap æ¯”è¼ƒè®š (ä¾¿å®œ + free privacy guard)

å…¶é¤˜æ–‡ç« å…§å®¹çœ‹èµ·ä¾†éƒ½å·®ä¸å¤šï¼Œé›™é–‹åˆ†é ç›´æ¥é¸è³¼æ¯”è¼ƒ

æœ€å¾Œé‚„æ˜¯é¸æ“‡ NameCheapï¼Œå› ç‚º Cheap

è¦æ³¨æ„ Vercel æœ‰å…§å»º `https`äº†ï¼ŒNameCheap é€™é‚Šä¸ç”¨åŠ è³¼

## å°‡æ–°åŸŸååŠ åˆ° Vercelï¼ŒæŠ€è¡“æ­¥é©Ÿ

1. åƒè€ƒ Vercel å®˜ç¶²æ–‡ä»¶ [Custom Domains](https://vercel.com/docs/concepts/projects/custom-domains)
1. æŒ‰ç…§æ­¥é©Ÿç”¢ç”Ÿå„ä¸€çµ„ `A Record` å’Œ `CName`  
1. æ¥è‘—å» NameCheap (domain provider) æ–°å¢é€™å…©çµ„è³‡æ–™
1. åƒè€ƒ NameCheap å®˜ç¶²æ–‡ä»¶ [How to Create a CNAME Record For Your Domain](https://www.namecheap.com/support/knowledgebase/article.aspx/9646/2237/how-to-create-a-cname-record-for-your-domain/)
1. å…ˆè¨­å®š `A Record` å†è¨­å®š `CName`
1. `A Record` èˆ‡ `CName` å¤§åŒå°ç•°ï¼Œå¯ä»¥è¤‡è£½ `CName` æ–‡ç« æ­¥é©Ÿ
1. `TTL` æˆ‘å…©é‚Šéƒ½è¨­ `Automatic`
1. è¨­å®šå¾Œ Vercel é‚£é‚Šæœƒè‡ªå‹• refresh
1. å¤§ç´„äº”åˆ†é˜å…§å°±å¯ä»¥ç”¨æ–°åŸŸåé–‹å•Ÿç¶²é äº†~

### æ’æ›²

1. ç¬¬ä¸€æ¬¡é–‹å•Ÿç¶²é éœ€è¦æ‰‹å‹•æ•² `http` (without s)
1. è·‘éä¸€æ¬¡å¾Œ `https` æœƒè‡ªå‹•è£œä¸Šï¼Œæ„Ÿæ© Vercel è®šå˜† Vercelï¼
1. NameCheap å’Œ Vercel é è¨­éƒ½æœƒåŠ ä¸€çµ„ redirect æŠŠ `johntao.one` è½‰åˆ° `www.johntao.one`
   - ä¸æ¸…æ¥šé€™æ¨£è¨­è¨ˆåŸå› ç‚ºä½•
   - å¦‚æœå…©é‚Šè¨­å®šç›¸åå¯èƒ½ç™¼ç”Ÿéè¿´
   - ä½†é è¨­æ˜¯å¯è¡Œçš„ï¼Œä¸æ±‚ç”šè§£ï¼

# ç¸½çµ

- æœ¬æ–‡å¾æŠ€è¡“è§’åº¦è¨˜éŒ„å¦‚ä½•å»ºç«‹ä¸€å€‹éƒ¨è½æ ¼
- é¦–å…ˆä»‹ç´¹ä½¿ç”¨çš„ç¶²é å»ºç½®æŠ€è¡“ --> Jamstack
- å†ä¾åºä»‹ç´¹æˆ‘é¸ç”¨çš„ Jamstack æŠ€è¡“ --> Next.js
- ä»¥åŠç›¸é—œæ–°æ‰‹åŒ…èˆ‡ç™¼å¸ƒæœå‹™ --> Vercel
- æœ€å¾Œå†ä»‹ç´¹åŸŸåä¾›æ‡‰å•†ä»¥åŠå¦‚ä½•è¨­å®šè²·å¥½çš„åŸŸå --> NameCheap

## è¨±é¡˜æ± 

- é€™æ–‡ç« æ˜¯ç¬¬äºŒç‰ˆï¼ŒæŠŠä¸€äº›åƒè€ƒè³‡æ–™å’Œå¿ƒè·¯æ­·ç¨‹é–¹å‰²æ‰äº†ï¼Œå¦‚æœ‰è®€è€…æƒ³çœ‹æ­¡è¿åº•ä¸‹æ•²ç¢—
- æœªä¾†å¸Œæœ›èƒ½å¯¦ä½œ reference popup çš„æ•ˆæœï¼Œé€™æ¨£å°±èƒ½éš¨å¿ƒæ‰€æ¬²çš„ç½®å…¥è¿·å› å’Œ buzzwords ğŸ˜†
- è‹¥å°å…§æ–‡æœ‰ä»€éº¼è¦‹è§£ï¼Œæˆ–å¸Œæœ›æœªä¾†çœ‹åˆ°ä»€éº¼ä¸»é¡Œï¼Œä¹Ÿæ­¡è¿åœ¨åº•ä¸‹ç•™è¨€ï½